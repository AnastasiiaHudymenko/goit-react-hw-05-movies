"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[89],{89:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(439),a=r(705),c=r(87),i=r(861),s=r(757),o=r.n(s),u=r(689),l=r(791),p=r(790),f=r(184),h=function(e){var t=e.query,r=(0,l.useState)([]),a=(0,n.Z)(r,2),s=a[0],h=a[1],v=(0,u.TH)(),m=new p.Z;return(0,l.useEffect)((function(){function e(){return e=(0,i.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getMovieSearch(t);case 2:r=e.sent,h(r);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}t&&function(t){e.apply(this,arguments)}(t)}),[t,v.state]),(0,f.jsx)("ul",{children:s.map((function(e){var t=e.id,r=e.title;return(0,f.jsx)("li",{children:(0,f.jsx)(c.rU,{to:"/movies/".concat(t),state:{from:v},children:(0,f.jsx)("p",{children:r})})},t)}))})},v=function(){var e=(0,c.lr)(),t=(0,n.Z)(e,2),r=t[0],i=t[1],s=r.get("search");return(0,f.jsxs)("main",{children:[(0,f.jsx)(a.J9,{initialValues:{search:""},onSubmit:function(e,t){var r=e.search;i(""!==r?{search:r}:{}),console.log(r),t.resetForm()},children:(0,f.jsxs)(a.l0,{children:[(0,f.jsx)("label",{children:(0,f.jsx)(a.gN,{type:"text",name:"search"})}),(0,f.jsx)("button",{type:"submit",children:"Search"})]})}),(0,f.jsx)(h,{query:s})]})}},790:function(e,t,r){var n=r(861),a=r(144),c=r(671),i=r(757),s=r.n(i),o=r(924),u=(0,a.Z)((function e(){var t=this;(0,c.Z)(this,e),this.API_KEY="8dbbaf50b58201a2d3381e6f92e0ca1f",this.BASE_URL="https://api.themoviedb.org/3/",this.BASE_URL_IMG="https://image.tmdb.org/t/p/w500",this.getTrendingMovies=(0,n.Z)(s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(t.BASE_URL,"trending/movie/day?api_key=").concat(t.API_KEY));case 3:return r=e.sent,e.abrupt("return",t._transformTrendingMovies(r.data.results));case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this._transformTrendingMovies=function(e){return e.map((function(e){var r=e.id,n=e.title,a=e.poster_path;return{id:r,title:n,images:"".concat(t.BASE_URL_IMG).concat(a)}}))},this.getMovieDetalis=function(){var e=(0,n.Z)(s().mark((function e(r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(t.BASE_URL,"movie/").concat(r,"?api_key=").concat(t.API_KEY,"&language=en-US"));case 3:return n=e.sent,e.abrupt("return",t._transformMovieDetalis(n.data));case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.getCastOrReviewsMovie=function(){var e=(0,n.Z)(s().mark((function e(r,n){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(t.BASE_URL,"movie/").concat(r,"/").concat(n,"?api_key=").concat(t.API_KEY,"&language=en-US"));case 3:if(a=e.sent,"credits"!==n){e.next=6;break}return e.abrupt("return",t._transformCastMovie(a.data.cast));case 6:if("reviews"!==n){e.next=12;break}if(a.data.results.length){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",t._transformReviewsMovie(a.data.results));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}(),this.getMovieSearch=function(){var e=(0,n.Z)(s().mark((function e(r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(t.BASE_URL,"search/movie?api_key=").concat(t.API_KEY,"&language=en-US&include_adult=false&query=").concat(r));case 3:return n=e.sent,e.abrupt("return",t._transformMovie(n.data.results));case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this._transformMovie=function(e){return e.map((function(e){return{id:e.id,title:e.title}}))},this._transformMovieDetalis=function(e){var r=e.title,n=e.poster_path,a=e.overview,c=e.genres,i=e.popularity;return n?{title:r,image:"".concat(t.BASE_URL_IMG).concat(n),overview:a,genres:c,userScore:i}:{title:r,image:null,overview:a,genres:c,userScore:i}},this._transformCastMovie=function(e){return e.map((function(e){var r=e.character,n=e.name,a=e.profile_path,c=e.id;return a?{character:r,name:n,id:c,image:"".concat(t.BASE_URL_IMG).concat(a)}:{character:r,name:n,id:c,image:null}}))},this._transformReviewsMovie=function(e){return e.map((function(e){return{author:e.author,id:e.id,content:e.content}}))}}));t.Z=u}}]);
//# sourceMappingURL=89.b328c586.chunk.js.map